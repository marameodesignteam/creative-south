jQuery(document).ready(function(e){function s(e){for(var s="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=t.length,a=0;a<e;a++)s+=t.charAt(Math.floor(Math.random()*i));return s}function t(s){const t=".box-schema-item[data-key='"+s+"'] .seopress_rich_snippets_articles_counters";e(t).after('<div class="seopress_rich_snippets_articles_counters_val">/ 110</div>'),0!=e(t).length&&(e(t).text(e(".box-schema-item[data-key='"+s+"'] .seopress_pro_rich_snippets_article_title_meta").val().length),e(".box-schema-item[data-key='"+s+"'] .seopress_pro_rich_snippets_article_title_meta").val().length>110&&e(t).css("color","red"),e(".box-schema-item[data-key='"+s+"'] .seopress_pro_rich_snippets_article_title_meta").keyup(function(i){e(t).css("color","inherit"),e(this).val().length>110&&e(t).css("color","red"),e(t).text(e(".box-schema-item[data-key='"+s+"'] .seopress_pro_rich_snippets_article_title_meta").val().length),e(this).val().length>0?(e(".snippet-title-custom").text(i.target.value),e(".snippet-title").css("display","none"),e(".snippet-title-custom").css("display","block"),e(".snippet-title-default").css("display","none")):0==e(this).val().length&&(e(".snippet-title-default").css("display","block"),e(".snippet-title-custom").css("display","none"),e(".snippet-title").css("display","none"))}))}function i(s){const t=".box-schema-item[data-key='"+s+"'] .seopress_rich_snippets_courses_counters";e(t).after('<div id="seopress_rich_snippets_courses_counters_val">/ 60</div>'),0!=e(t).length&&(e(t).text(e(".box-schema-item[data-key='"+s+"'] .seopress_pro_rich_snippets_courses_desc").val().length),e(".box-schema-item[data-key='"+s+"'] .seopress_pro_rich_snippets_courses_desc").val().length>60&&e(t).css("color","red"),e(".box-schema-item[data-key='"+s+"'] .seopress_pro_rich_snippets_courses_desc").keyup(function(i){e(t).css("color","inherit"),e(this).val().length>60&&e(t).css("color","red"),e(t).text(e(".box-schema-item[data-key='"+s+"'] .seopress_pro_rich_snippets_courses_desc").val().length),e(this).val().length>0?(e(".snippet-title-custom").text(i.target.value),e(".snippet-title").css("display","none"),e(".snippet-title-custom").css("display","block"),e(".snippet-title-default").css("display","none")):0==e(this).val().length&&(e(".snippet-title-default").css("display","block"),e(".snippet-title-custom").css("display","none"),e(".snippet-title").css("display","none"))}))}function a(){e(".seopress-date-picker").datepicker({dateFormat:"yy-mm-dd",beforeShow:function(s,t){e("#ui-datepicker-div").removeClass("ui-date-picker").addClass("seopress-ui-datepicker")}})}function p(s){const t=".box-schema-item[data-key='"+s+"'] .seopress_media_upload";0!==e(t).length&&e(t).each(function(t,i){const a=".box-schema-item[data-key='"+s+"'] #"+e(i).attr("id");var p;e(i).click(function(s){s.preventDefault(),p?p.open():(p=wp.media.frames.file_frame=wp.media({multiple:!1}),p.on("select",function(){attachment=p.state().get("selection").first().toJSON(),e(a).attr("data-id")&&(a=e(a).attr("data-id")),e(a+"_meta").val(attachment.url),e(a+"_width").val(attachment.width),e(a+"_height").val(attachment.height)}),p.open())})})}function o(s){0!==e(".box-schema-item[data-key='"+s+"'] #wrap-faq .faq").length&&e(".box-schema-item[data-key='"+s+"'] #wrap-faq .faq").accordion({collapsible:!0,active:!1,heightStyle:"panel",header:"h3"})}function r(s){const t=".box-schema-item[data-key='"+s+"'] #wrap-faq";if(0!==e(t).length){var i=e(".box-schema-item[data-key='"+s+"'] #wrap-faq .faq:last").clone(),a=!1;e(".box-schema-item[data-key='"+s+"'] #wrap-faq .faq h3").click(function(e){a&&(e.stopImmediatePropagation(),e.preventDefault(),a=!1)});var p=e("#wrap-faq").attr("data-count");e(".box-schema-item[data-key='"+s+"'] #add-faq").click(function(t){t.preventDefault(),p++;var a=i.clone().find(":input").each(function(){var s=this.id,t=this.name,i=this.id.replace(/(\[seopress_pro_rich_snippets_faq\])\[.*?\]/,"$1["+p+"]");e(this).attr("name",t.replace(/(\[seopress_pro_rich_snippets_faq\])\[.*?\]/,"$1["+p+"]")),e(this).prev().attr("for",s.replace(/(\[seopress_pro_rich_snippets_faq\])\[.*?\]/,"$1["+p+"]")),e(this).prev().attr("id",t.replace(/(\[seopress_pro_rich_snippets_faq\])\[.*?\]/,"$1["+p+"]")),this.id=i}).end();return a.appendTo(".box-schema-item[data-key='"+s+"'] #wrap-faq"),o(s),!1}),e(".box-schema-item[data-key='"+s+"'] #wrap-faq").on("click",".remove-faq",function(){return e(this).fadeOut(300,function(){return e(this).parent().parent().parent().parent().remove(),!1}),!1})}}function n(s){0!==e(".box-schema-item[data-key='"+s+"'] #wrap-how-to .step").length&&e(".box-schema-item[data-key='"+s+"'] #wrap-how-to .step").accordion({collapsible:!0,active:!1,heightStyle:"panel",header:"h3"})}function c(s){const t=".box-schema-item[data-key='"+s+"'] #wrap-how-to";if(0!==e(t).length){var i=e(".box-schema-item[data-key='"+s+"'] #wrap-how-to .step:last").clone(),a=!1;e(".box-schema-item[data-key='"+s+"'] #wrap-how-to .step h3").click(function(e){a&&(e.stopImmediatePropagation(),e.preventDefault(),a=!1)});var p=e("#wrap-how-to").attr("data-count");e(".box-schema-item[data-key='"+s+"'] #add-step").click(function(t){t.preventDefault(),p++;var a=i.clone().find(":input").each(function(){var s=this.id,t=this.name,i=this.id.replace(/(\[seopress_pro_rich_snippets_how_to\])\[.*?\]/,"$1["+p+"]");e(this).attr("name",t.replace(/(\[seopress_pro_rich_snippets_how_to\])\[.*?\]/,"$1["+p+"]")),e(this).prev().attr("for",s.replace(/(\[seopress_pro_rich_snippets_how_to\])\[.*?\]/,"$1["+p+"]")),e(this).prev().attr("id",t.replace(/(\[seopress_pro_rich_snippets_how_to\])\[.*?\]/,"$1["+p+"]")),this.id=i}).end();return a.appendTo(".box-schema-item[data-key='"+s+"'] #wrap-how-to"),n(s),!1}),e(".box-schema-item[data-key='"+s+"'] #wrap-how-to").on("click",".remove-step",function(){return e(this).fadeOut(300,function(){return e(this).parent().parent().parent().parent().remove(),!1}),!1})}}function l(){e('select[id$="[filter]"]').on("change",function(s){const t=e(this).val();"taxonomy"===t?(e(this).parent().find('select[id$="[taxo]"]').show(),e(this).parent().find('input[id$="[postId]"]').hide(),e(this).parent().find('select[id$="[cpt]"]').hide()):"post_type"===t?(e(this).parent().find('select[id$="[taxo]"]').hide(),e(this).parent().find('input[id$="[postId]"]').hide(),e(this).parent().find('select[id$="[cpt]"]').show()):"postId"===t&&(e(this).parent().find('select[id$="[taxo]"]').hide(),e(this).parent().find('input[id$="[postId]"]').show(),e(this).parent().find('select[id$="[cpt]"]').hide())})}function h(){var s=e("p[data-group]").length;e(".seopress_pro_rich_snippets_rules_del").show(),1==s&&e(".seopress_pro_rich_snippets_rules_del:first").hide()}e("#seopress-schemas-tabs").length&&(e("#seopress-schemas-tabs .hidden").removeClass("hidden"),e("#seopress-schemas-tabs").tabs()),a(),e(".box-schema-item").each(function(e){t(e),i(e),r(e),c(e),o(e),n(e)}),e(".wrap-rich-snippets-item").toggle(),e(".js-handle-snippet-type").toggleClass("closed"),e(document).on("click",".js-handle-snippet-type",function(s){s.preventDefault(),e(this).parent().parent().find(".wrap-rich-snippets-item").toggle(),e(this).toggleClass("closed")}),e(".js-expand-all").on("click",function(s){s.preventDefault(),e(".wrap-rich-snippets-item").show(),e(".js-handle-snippet-type").addClass("closed")}),e(".js-close-all").on("click",function(s){s.preventDefault(),e(".wrap-rich-snippets-item").hide(),e(".js-handle-snippet-type").removeClass("closed")}),e("#js-add-schema-manual").on("click",function(t){t.preventDefault();const i=document.querySelector("#js-select-template-schema");if(0===i.length)return;const a=s(10);let p=e(i).clone().html();p=p.replace("[X]",a).replace("seopress_pro_rich_snippets_data[X]","seopress_pro_rich_snippets_data["+a+"]").replace("[X]",a),e("#js-box-list-schemas").prepend(p)}),e(document).on("click",".js-delete-schema-manual",function(s){s.preventDefault();const t=e(this).data("key");if(e(".box-schema-item[data-key='"+t+"']").remove(),0===e(".box-schema-item").length){const s=document.querySelector("#schema-template-empty");if(0===s.length)return;const t=e(".box-schema-item").length;let i=e(s).clone().html();i=i.replace("[X]",t).replace("seopress_pro_rich_snippets_data[X]","seopress_pro_rich_snippets_data["+t+"]").replace("[X]",t),e("#js-box-list-schemas").prepend(i)}}),e(document).on("change",".js-select_seopress_pro_rich_snippets_type",function(s){s.preventDefault();const l=e(this),h=e(this).val(),d=document.querySelector("#schema-template-"+h);if(0===d.length)return;const _=function(){return l.parent().parent().parent()};_().find(".wrap-rich-snippets-item:eq(0)").hide(),_().find(".wrap-rich-snippets-item:eq(1)").remove();let u=h,m=h;switch(u){case"localbusiness":u="local-business",m="local-business";break;case"articles":u="article";break;case"courses":u="course";break;case"recipes":u="recipe";break;case"videos":u="video";break;case"events":u="event";break;case"products":u="product";break;case"softwareapp":u="software",m="software-app";break;case"services":u="service";break;case"event":u="events",m="events"}let f=null;const v=_().find(".wrap-rich-snippets-item:eq(0)").hasClass("wrap-rich-snippets-"+m);if(v)_().find(".wrap-rich-snippets-item:eq(0)").show();else{const s="seopress_pro_rich_snippets_data[X]";let t=e(d).clone().html();f=_().data("key"),t=t.split(s).join("seopress_pro_rich_snippets_data["+f+"]"),_().append(t)}if(null!==f){switch(u){case"article":t(f);break;case"course":i(f);break;case"faq":r(f),o(f);break;case"howto":c(f),n(f)}a(),p(f)}}),e(document).on("click","#seopress-tag-employment-1, #seopress-tag-employment-2, #seopress-tag-employment-3, #seopress-tag-employment-4, #seopress-tag-employment-5, #seopress-tag-employment-6, #seopress-tag-employment-7, #seopress-tag-employment-8",function(){var s=e(this).closest(".seopress_pro_rich_snippets_jobs_employment_type_p").find(".seopress_pro_rich_snippets_jobs_employment_type");0==s.val().length?s.val(jQuery(this).text()):(str=s.val(),str=str.replace(/,\s*$/,""),s.val(str+","+e(this).text()))});var d=e("p[data-group]").length,_=e("div[data-group]").length;l(),e("p[data-group]").each(function(s,t){e(t).data("group");h(t)}),e(".seopress_pro_rich_snippets_rules_del").css("cursor","pointer"),e(".wrap-rich-snippets-rules").on("click",".seopress_pro_rich_snippets_rules_and",function(s){var t=e(this).parent().clone().prop("outerHTML");t=t.replace(/\[\i[0-9]\]/g,"[i"+d+"]"),d++,e(this).parent().after(t),l(),h()}),e(".wrap-rich-snippets-rules").on("click",".seopress_pro_rich_snippets_rules_del",function(s){var t=e(this).data("group");1==e('p[data-group="'+t+'"]').length&&(e(this).parent().parent().prev(".separat_or").length?e(this).parent().parent().prev(".separat_or").remove():e(this).parent().parent().next(".separat_or").remove()),e(this).parent().remove(),""==e('div[data-group="'+t+'"]').html()&&e('div[data-group="'+t+'"]').remove(),h()}),e(document).on("click",".wrap-rich-snippets-rules #seopress_pro_rich_snippets_rules_add",function(s){var t=e(".wrap-rich-snippets-rules div[data-group]:first");t=t.clone(),e(t).find("p[data-group]:not(:first)").remove(),e(t).find(".seopress_pro_rich_snippets_rules_del").show(),t=t.prop("outerHTML"),t=t.replace(/\[\g[0-9]\]/g,"[g"+_+"]"),t=t.replace(/data-group="[0-9]"/g,'data-group="'+_+'"');var i=e(".separat_or:first").clone().prop("outerHTML");t+=i,_++,e(this).parent().prev().after(t),l(),h()}),e(':checkbox[name$="[closed]"]').on("click",function(s){e(this).parent().parent().find("li:not(:first)").toggle()}),e(':checked[name$="[closed]"]').each(function(s){e(this).parent().parent().find("li:not(:first)").toggle()});var u=e("#seopress-schemas-tabs .sp-schema-count").attr("data-count");e("#sp-automatic-tab span").html(u),e("#seopress-your-schema select.dyn").change(function(s){s.preventDefault();var t=e(this).val();"manual_global"==t?(e(this).next("input.manual_global").show(),e(this).closest("p").find("input.manual_global").show(),e(this).closest("p").find("select.lb").hide(),e(this).closest("p").find("select.cf").hide(),e(this).closest("p").find("select.tax").hide()):"manual_img_global"==t?(e(this).next("input.manual_img_global").show(),e(this).closest("p").find("input.manual_img_library_global").hide(),e(this).closest("p").find("select.lb").hide(),e(this).closest("p").find("select.cf").hide(),e(this).closest("p").find("select.tax").hide()):"manual_img_library_global"==t?(e(this).next("input.manual_img_global").hide(),e(this).closest("p").find("input.manual_img_library_global").show(),e(this).closest("p").find("select.lb").hide(),e(this).closest("p").find("select.cf").hide(),e(this).closest("p").find("select.tax").hide()):"manual_date_global"==t?(e(this).next("input.manual_date_global").show(),e(this).closest("p").find("select.lb").hide(),e(this).closest("p").find("select.cf").hide(),e(this).closest("p").find("select.tax").hide()):"manual_time_global"==t?(e(this).next("input.manual_time_global").show(),e(this).closest("p").find("select.lb").hide(),e(this).closest("p").find("select.cf").hide(),e(this).closest("p").find("select.tax").hide()):"manual_rating_global"==t?(e(this).next("input.manual_rating_global").show(),e(this).closest("p").find("select.lb").hide(),e(this).closest("p").find("select.cf").hide(),e(this).closest("p").find("select.tax").hide()):"custom_fields"==t?(e(this).closest("p").find("input").hide(),e(this).closest("p").find("input.manual_img_global").hide(),e(this).closest("p").find("input.manual_img_library_global").hide(),e(this).closest("p").find("input.manual_date_global").hide(),e(this).closest("p").find("input.manual_time_global").hide(),e(this).closest("p").find("input.manual_rating_global").hide(),e(this).closest("p").find("select.lb").hide(),e(this).closest("p").find("select.tax").hide(),e(this).closest("p").find("select.cf").show()):"custom_taxonomy"==t?(e(this).closest("p").find("input").hide(),e(this).closest("p").find("input.manual_img_global").hide(),e(this).closest("p").find("input.manual_img_library_global").hide(),e(this).closest("p").find("input.manual_date_global").hide(),e(this).closest("p").find("input.manual_time_global").hide(),e(this).closest("p").find("input.manual_rating_global").hide(),e(this).closest("p").find("select.lb").hide(),e(this).closest("p").find("select.cf").hide(),e(this).closest("p").find("select.tax").show()):"manual_custom_global"==t?(e(this).closest("p").find("textarea.manual_custom_global").show(),e(this).closest("p").find("select.lb").hide(),e(this).closest("p").find("select.cf").hide()):"manual_lb_global"==t?(e(this).closest("p").find("select.lb").show(),e(this).closest("p").find("select.cf").hide(),e(this).closest("p").find("select.tax").hide(),e(this).closest("p").find("input").hide(),e(this).closest("p").find("textarea").hide()):(e(this).closest("p").find("select.lb").hide(),e(this).closest("p").find("select.cf").hide(),e(this).closest("p").find("select.tax").hide(),e(this).closest("p").find("input").hide(),e(this).closest("p").find("textarea").hide())}).trigger("change");var m=".wrap-rich-snippets-articles",f=".wrap-rich-snippets-local-business",v=".wrap-rich-snippets-faq",g=".wrap-rich-snippets-courses",w=".wrap-rich-snippets-recipes",b=".wrap-rich-snippets-jobs",y=".wrap-rich-snippets-videos",k=".wrap-rich-snippets-events",x=".wrap-rich-snippets-products",q=".wrap-rich-snippets-services",j=".wrap-rich-snippets-software-app",$=".wrap-rich-snippets-review",D=".wrap-rich-snippets-custom",C=".wrap-rich-snippets-type .advice";e("#seopress-your-schema .box-left > p ~ div").hide(),"none"==e("#seopress-your-schema #seopress_pro_rich_snippets_type option:selected").val()?e(C).show():"articles"==e("#seopress-your-schema #seopress_pro_rich_snippets_type option:selected").val()?(e(C).hide(),e(m).show()):"localbusiness"==e("#seopress-your-schema #seopress_pro_rich_snippets_type option:selected").val()?(e(C).hide(),e(f).show()):"faq"==e("#seopress-your-schema #seopress_pro_rich_snippets_type option:selected").val()?(e(C).hide(),e(v).show()):"courses"==e("#seopress-your-schema #seopress_pro_rich_snippets_type option:selected").val()?(e(C).hide(),e(g).show()):"recipes"==e("#seopress-your-schema #seopress_pro_rich_snippets_type option:selected").val()?(e(C).hide(),e(w).show()):"jobs"==e("#seopress-your-schema #seopress_pro_rich_snippets_type option:selected").val()?(e(C).hide(),e(b).show()):"videos"==e("#seopress-your-schema #seopress_pro_rich_snippets_type option:selected").val()?(e(C).hide(),e(y).show()):"events"==e("#seopress-your-schema #seopress_pro_rich_snippets_type option:selected").val()?(e(C).hide(),e(k).show()):"products"==e("#seopress-your-schema #seopress_pro_rich_snippets_type option:selected").val()?(e(C).hide(),e(x).show()):"services"==e("#seopress-your-schema #seopress_pro_rich_snippets_type option:selected").val()?(e(C).hide(),e(q).show()):"softwareapp"==e("#seopress-your-schema #seopress_pro_rich_snippets_type option:selected").val()?(e(C).hide(),e(j).show()):"review"==e("#seopress-your-schema #seopress_pro_rich_snippets_type option:selected").val()?(e(C).hide(),e($).show()):"custom"==e("#seopress-your-schema #seopress_pro_rich_snippets_type option:selected").val()&&(e(C).hide(),e(D).show()),e("#seopress-your-schema #seopress_pro_rich_snippets_type").change(function(){var s=e("#seopress-your-schema #seopress_pro_rich_snippets_type").val();"none"==s&&(e(C).show(),e(m+","+f+","+v+","+g+","+w+","+b+","+y+","+k+","+x+","+q+","+j+","+$+","+D).hide()),"articles"==s&&(e(m).show(),e(C+","+f+","+v+","+g+","+w+","+b+","+y+","+k+","+x+","+q+","+j+","+$+","+D).hide()),"localbusiness"==s&&(e(f).show(),e(C+","+m+","+v+","+g+","+w+","+b+","+y+","+k+","+x+","+q+","+j+","+$+","+D).hide()),"faq"==s&&(e(v).show(),e(C+","+m+","+f+","+g+","+w+","+b+","+y+","+k+","+x+","+q+","+j+","+$+","+D).hide()),"courses"==s&&(e(g).show(),e(C+","+m+","+f+","+v+","+w+","+b+","+y+","+k+","+x+","+q+","+j+","+$+","+D).hide()),"recipes"==s&&(e(w).show(),e(C+","+m+","+f+","+v+","+g+","+b+","+y+","+k+","+x+","+q+","+j+","+$+","+D).hide()),"jobs"==s&&(e(b).show(),e(C+","+m+","+f+","+v+","+g+","+w+","+y+","+k+","+x+","+q+","+j+","+$+","+D).hide()),"videos"==s&&(e(y).show(),e(C+","+m+","+f+","+v+","+g+","+w+","+b+","+k+","+x+","+q+","+j+","+$+","+D).hide()),"events"==s&&(e(k).show(),e(C+","+m+","+f+","+v+","+g+","+w+","+b+","+y+","+x+","+q+","+j+","+$+","+D).hide()),"products"==s&&(e(x).show(),e(C+","+m+","+f+","+v+","+g+","+w+","+b+","+y+","+k+","+q+","+j+","+$+","+D).hide()),"services"==s&&(e(q).show(),e(C+","+m+","+f+","+v+","+g+","+w+","+b+","+y+","+k+","+x+","+j+","+$+","+D).hide()),"softwareapp"==s&&(e(j).show(),e(C+","+m+","+f+","+v+","+g+","+w+","+b+","+y+","+k+","+x+", "+q+", "+$+","+D).hide()),"review"==s&&(e($).show(),e(C+","+m+","+f+","+v+","+g+","+w+","+b+","+y+","+k+","+x+","+j+","+q+","+D).hide()),"custom"==s&&(e(D).show(),e(C+","+m+","+f+","+v+","+g+","+w+","+b+","+y+","+k+","+x+","+j+","+q+","+$).hide())})});